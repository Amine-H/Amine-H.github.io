{"componentChunkName":"component---src-templates-post-template-js","path":"/posts/troubleshoot-performance-problems-on-your-webapp","result":{"data":{"markdownRemark":{"id":"36d59fb4-6e1f-5ac5-9608-537e8e4886af","html":"<p>You’ve wrote an awesome web app, I am sure you must be proud of it and all. but there is these little things that might bother you a little, why is the load time is slow? why isn’t it snappy?</p>\n<p>You’ve come to the right place, let’s get right to it then, no BS.</p>\n<h1 id=\"measure\" style=\"position:relative;\"><a href=\"#measure\" aria-label=\"measure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Measure</h1>\n<p>before we do anything, let’s set a baseline, this is critical because otherwise you will not know if your changes made it better, worse or if it had no measureable difference.</p>\n<h2 id=\"lighthouse\" style=\"position:relative;\"><a href=\"#lighthouse\" aria-label=\"lighthouse permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Lighthouse</h2>\n<p>Lighthouse is one of the best tools to test your website for performance, accessibility and UX problems.</p>\n<p>there are multiple ways that you can get your hands on lighthouse, <a href=\"https://developers.google.com/web/tools/lighthouse#devtoolsasda\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">chrome dev tools</a> or in the <a href=\"https://developers.google.com/web/tools/lighthouse#cli\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">cli</a>.</p>\n<p>Here’s what a lighthouse audit looks like:\n<img src=\"/media/2020-06-08/blog-audit.jpg\" alt=\"blog lighthouse audit\"></p>\n<h2 id=\"react-profiler\" style=\"position:relative;\"><a href=\"#react-profiler\" aria-label=\"react profiler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Profiler</h2>\n<p>If your web-app is a written in react then you definitely want to use this tool, and it’s available on all major browsers including <a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">chrome</a> and <a href=\"https://addons.mozilla.org/en-GB/firefox/addon/react-devtools/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">firefox</a>.</p>\n<p>Here’s what a profiling result would look like:\n<img src=\"/media/2020-06-08/blog-react-audit.jpg\" alt=\"blog react profiler audit\"></p>\n<h2 id=\"chrome-performance-profiler\" style=\"position:relative;\"><a href=\"#chrome-performance-profiler\" aria-label=\"chrome performance profiler permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Chrome Performance profiler</h2>\n<p>Chrome’s performance profiler is also very powerful, a typical audit comes PACKED with information, and our job is to get sense of what is going on there, I highly recommend getting used to it.</p>\n<p>Here’s what the result would look like:\n<img src=\"/media/2020-06-08/blog-chrome-performance-profiler.jpg\" alt=\"blog chrome performance audit\"></p>\n<h2 id=\"bundlephobia\" style=\"position:relative;\"><a href=\"#bundlephobia\" aria-label=\"bundlephobia permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>bundlephobia</h2>\n<p><a href=\"https://bundlephobia.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">bundlephobia</a> is great on figuring out what’s the size of your dependencies, it now supports scanning <a href=\"https://bundlephobia.com/scan\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">package.json</a> which is pretty cool, will save you the trouble of looking into each dependency separately.</p>\n<h2 id=\"source-map-explorer\" style=\"position:relative;\"><a href=\"#source-map-explorer\" aria-label=\"source map explorer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>source-map-explorer</h2>\n<p><a href=\"https://www.npmjs.com/package/source-map-explorer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">source-map-explorer</a> is perfect for making sense of your <code class=\"language-text\">bundle</code>, I am sure you lazied your way and installed a couple of dependencies to do some of the heavy lifting for you, we all do it, but we gotta make sure that the cost we’re paying is worth the value provided by the dependency.</p>\n<p>Here’s what a simple bundle would look like:\n<img src=\"/media/2020-06-08/source-map-explorer.jpg\" alt=\"source-map-explorer\"></p>\n<h2 id=\"dom-tree-viewer\" style=\"position:relative;\"><a href=\"#dom-tree-viewer\" aria-label=\"dom tree viewer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DOM tree viewer</h2>\n<p>I am sure I’ve lost you with this one, just follow me, it’ll make sense in a second.</p>\n<p>I didn’t have much choices when it comes to this, the big idea is, we need a tool that’ll take our DOM tree and generate visual graph representation of it.</p>\n<p>That way we can make sense of what DOM nodes are mounted that we don’t even need. or how we could optimize the depth of our component tree, to minimize the amount of nodes that our application has to mount.</p>\n<p>I only found one good <a href=\"https://chrome.google.com/webstore/detail/dom-node-tree-viewer/jbplakkefflidgnjhckoahendgekokfc?hl=en\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">extension</a> that does this, if you know a better alternative, please share it with us in the comments section below.</p>\n<h1 id=\"techniques\" style=\"position:relative;\"><a href=\"#techniques\" aria-label=\"techniques permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Techniques</h1>\n<p>Alright, so we have our performance metrics, now let’s get cracking, I’ll share with you a couple of easy reproducible techniques you can do to improve your web app’s performance.</p>\n<h2 id=\"avoid-unecessary-re-renders\" style=\"position:relative;\"><a href=\"#avoid-unecessary-re-renders\" aria-label=\"avoid unecessary re renders permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Avoid unecessary re-renders</h2>\n<p>When you look at the audits, try and look for a component that renders more than once, and try to figure out why it does so.</p>\n<p>If your app is a react app, then you can easily spot this on <code class=\"language-text\">Profiler</code> tab of <code class=\"language-text\">react dev tools</code>, especially if you enable <code class=\"language-text\">Record why each component rendered while profiling.</code> on the settings tab.</p>\n<p>now that you’ve set your eyes on one component, you got to find why it’s re-rendering, this checklist might help your out:</p>\n<ul>\n<li>is component pure? if not, make it so it’ll save you so much trouble</li>\n<li>use <code class=\"language-text\">memo</code> when needed, it’ll memoize your component and wouldn’t re-render unless the props change.</li>\n<li><code class=\"language-text\">mapStateToProps</code>, if you use <code class=\"language-text\">redux</code>, make sure to spread the mapping directly from the store, don’t do any computation there as it might change the prop’s reference, just defer the computation to render, or move it to the reducer if that’s possible.</li>\n</ul>\n<h2 id=\"reduce-mounted-dom-nodes\" style=\"position:relative;\"><a href=\"#reduce-mounted-dom-nodes\" aria-label=\"reduce mounted dom nodes permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reduce mounted DOM nodes</h2>\n<p>This is where we’ll use <code class=\"language-text\">DOM tree viewer</code>, fire it up and look into the result, try to compare it with what you can see visually, I am sure you’ll find the nodes that shouldn’t be even mounted.</p>\n<h2 id=\"reduce-layout-shift\" style=\"position:relative;\"><a href=\"#reduce-layout-shift\" aria-label=\"reduce layout shift permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Reduce Layout shift</h2>\n<p>Have you been to a website where it restructures its layout as it loads? that’s not cool, and will hurt the perceived performance of your application, make sure to minimize that and have placeholders where needed.</p>\n<h2 id=\"code-splitting\" style=\"position:relative;\"><a href=\"#code-splitting\" aria-label=\"code splitting permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Code-splitting</h2>\n<p>Code-splitting, can yield very good results if done right, and make your performance worse if done wrong, be careful and make sure to compare the metrics when you code-split anything.</p>\n<p>Some of the factors that you need to look into when deciding what to lazy load are:</p>\n<ul>\n<li>is it necessary for the First meaningful paint?</li>\n<li>can we defer the logic to after the First meaningful paint?</li>\n<li>is it necessary on this particual route?</li>\n</ul>\n<h2 id=\"question-your-dependencies\" style=\"position:relative;\"><a href=\"#question-your-dependencies\" aria-label=\"question your dependencies permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Question your dependencies</h2>\n<p>After looking into the bundle, you’ll find your dependencies taking a very comfy portion of your bundle.\nAnd you should ask these questions:</p>\n<ul>\n<li>am I <a href=\"https://webpack.js.org/guides/tree-shaking/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">shaking that tree</a> correctly?</li>\n<li>are there other better lighter alternatives?</li>\n</ul>","fields":{"slug":"/posts/troubleshoot-performance-problems-on-your-webapp","tagSlugs":["/tag/javascript/"]},"frontmatter":{"date":"2020-06-08T00:22:07.927Z","description":"We'll look into multiple ways, tools and how it will help you make your web app faster!","tags":["javascript"],"title":"Troubleshoot performance problems on your webapp","socialImage":"/media/image-3.jpg"}}},"pageContext":{"slug":"/posts/troubleshoot-performance-problems-on-your-webapp"}}}